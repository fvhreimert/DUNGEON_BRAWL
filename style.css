/* === GLOBAL STYLES === */

/* --- Basic Reset & Font --- */
* {
    margin: 0;
    padding: 0;
    box-sizing: border-box;
}

html {
    font-size: 16px; /* Base for rem */
}

html, body {
    height: 100%;
    width: 100%;
    overflow: hidden; /* Prevent scrolling on the body itself */
}

body {
    font-family: 'Press Start 2P', cursive;
    font-size: clamp(0.55rem, 1.1vw + 0.1rem, 0.9rem);
    background-color: #3a3a3a;
    background-image: url('images/dungeon_brick.png');
    background-size: 700px auto;
    background-repeat: repeat;
    background-position: top left;
    color: #e0e0e0;
    display: flex;
    justify-content: center;
    align-items: center;
    padding: 0;
    position: relative;
}

/* --- Utility: Pixelated Images --- */
.icon-group img,
.sub-icon img, /* Keep if sub-icons might be used */
.chest img,
.inventory-button-icon,
#goblet-symbol-img,
.treasure-slot img,
#roulette-wheel-img,
#card-image,
.card-image-area img {
    image-rendering: pixelated;
    image-rendering: -moz-crisp-edges; /* Older Firefox */
    image-rendering: crisp-edges;    /* Modern browsers */
}

/* --- Utility: Basic Button --- */
/* (Consider if more common button styles can be grouped here) */
button,
input[type="button"],
input[type="submit"] { /* Add other button-like inputs if needed */
     font-family: 'Press Start 2P', cursive; /* Ensure font consistency */
     cursor: pointer;
}


/* === LAYOUT & STRUCTURE === */
/* --- NEW: Quiz Selection Styles --- */
#quiz-selection-step {
    margin-bottom: 25px; /* Space below quiz selection */
    text-align: center;
}

#quiz-selection-step h3 {
    margin-bottom: 15px;
    color: #c8b084;
    text-shadow: 1px 1px #000;
}

.quiz-list-container {
    display: flex;
    flex-direction: column; /* Stack buttons vertically */
    gap: 10px; /* Space between buttons */
    align-items: center; /* Center buttons horizontally */
    max-height: 50vh; /* Limit height if many quizzes */
    overflow-y: auto; /* Allow scroll if needed */
    padding: 10px 0; /* Padding top/bottom */
}

.quiz-list-container button {
    /* font-family inherited from .setup-content button */
    padding: 10px 20px;
    background-color: #7a6a5a;
    color: #f0e0c0;
    border: 2px solid #2d241d;
    font-size: 0.9em;
    transition: background-color 0.2s;
    width: 80%; /* Adjust width as desired */
    max-width: 300px;
    min-height: 40px; /* Ensure decent click area */
}

.quiz-list-container button:hover {
    background-color: #9a8a7a;
}

/* --- Wrapper for Game + Icons --- */
.game-environment {
    display: flex;
    justify-content: center;
    align-items: center;
    width: 100%;
    /* --- INCREASE THIS VALUE --- */
    max-width: 1900px; /* Was 1600px */
    height: 100%;
    gap: clamp(10px, 1.5vw, 25px);
    padding: clamp(5px, 1vh, 10px) clamp(10px, 1.5vw, 20px);
}

/* Around line 90 */
.main-game-area {
    position: relative;
    display: flex;
    flex-direction: column;
    align-items: center;
    width: 100%; /* Takes full width of its allowed space */
    height: 100%;
    margin: 0;
    flex-shrink: 1;
    flex-grow: 1;
    min-height: 0;
    z-index: 1;
    /* --- INCREASE THIS VALUE --- */
    max-width: 1400px; /* Was 1100px */
}

/* --- Game Container --- */
.game-container {
    background-color: rgba(0, 0, 0, 0.3);
    padding: clamp(5px, 1vh, 10px);
    border: 3px solid #222;
    box-shadow: 0 0 10px rgba(0, 0, 0, 0.4);
    width: 100%;
    margin-bottom: clamp(5px, 1vh, 10px);
    display: flex;
    flex-direction: column;
    flex-grow: 1;
    min-height: 0;
    overflow: hidden; /* Keep this to contain board */
}

/* --- Player Info Area --- */
#player-info-area {
    display: flex;
    flex-direction: row;
    align-items: stretch;
    justify-content: center;
    gap: clamp(5px, 1vw, 10px);
    margin-top: clamp(5px, 1vh, 10px);
    padding: clamp(5px, 1vh, 8px);
    background-color: rgba(0, 0, 0, 0.4);
    border: 2px solid #222;
    width: 100%;
    flex-wrap: wrap;
    flex-shrink: 0;
}

#player-cards-container {
    display: flex;
    flex-wrap: wrap;
    justify-content: center;
    gap: clamp(5px, 1vw, 10px);
    flex-grow: 1;
    width: 100%;
}


/* === GAME COMPONENTS === */

/* --- Side Icons Area --- */
.side-icon {
    width: clamp(80px, 11vw, 200px);
    display: flex;
    flex-direction: column;
    align-items: center;
    text-align: center;
    z-index: 20;
    flex-shrink: 0;
    gap: clamp(15px, 2.5vh, 25px);
    padding: clamp(10px, 2vh, 15px) 0;
    position: relative;
    max-height: 95%;
    overflow: visible; /* Allow glows to spill out */
}

.icon-group {
    position: relative;
    display: flex;
    flex-direction: column;
    align-items: center;
    width: 100%;
    /* Add padding if needed to prevent text overlap with glow */
    /* padding-bottom: 15px; */
}

.icon-group img {
    max-width: clamp(170px, 12vw, 480px);
    height: auto;
    display: block;
    cursor: pointer;
    transition: transform 0.2s ease, filter 0.3s ease;
    margin-bottom: 4px;
    filter: drop-shadow(0 0 0 transparent); /* Base state for glow */
    /* image-rendering properties handled globally */
}

.icon-group img:hover {
    transform: scale(1.1);
}

/* Specific Side Icon Hovers */
#card-jester-img:hover {
    filter: drop-shadow(0px 0px 8px rgba(255, 0, 0, 0.85)); /* Bright Red */
}
#mad-seer-img:hover {
    filter: drop-shadow(0px 0px 8px rgba(128, 0, 128, 0.85)) !important; /* Purple - Keep !important if needed */
}
#frog-of-fate-img:hover {
    filter: drop-shadow(0px 0px 8px rgba(0, 255, 0, 0.85)); /* Green */
}
#sacrificial-goblet-img:hover {
    filter: drop-shadow(0px 0px 8px rgba(139, 0, 0, 0.85)); /* Dark Red */
}

.icon-group span:not(.icon-price-tag) {
    font-size: clamp(0.6em, 1vw, 0.8em);
    color: #c8b084;
    line-height: 1.1;
    user-select: none;
    pointer-events: none;
    display: block;
}

.icon-price-tag {
    position: absolute;
    top: 2px;
    right: 2px;
    z-index: 2;
    background-color: #4d1f1f;
    color: #ffcc00;
    font-family: 'Press Start 2P', cursive; /* Keep for specific styling */
    font-size: clamp(0.7em, 1.4vw, 0.9em); /* Increased */
    padding: 3px 6px; /* Increased */
    border: 1px solid #330d0d;
    border-radius: 3px;
    box-shadow: 1px 1px 2px rgba(0,0,0,0.6);
    white-space: nowrap;
    user-select: none;
    pointer-events: none;
    display: inline-block;
    line-height: 1;
}

/* --- Sub-Icon Styles (Consolidated - Remove if unused) --- */
.sub-icon img {
    width: clamp(50px, 12vw, 190px);
    max-width: 95%;
    height: auto;
    display: block;
    cursor: pointer;
    transition: transform 0.2s ease;
    /* image-rendering handled globally */
}
.sub-icon img:hover {
    transform: scale(1.1);
}
.sub-icon span { /* Single rule */
    font-size: 0.8em;
    color: #b8a074;
    line-height: 1.1;
    margin-top: 6px;
    display: block;
    user-select: none;
    pointer-events: none;
}
.sub-icon .icon-price-tag {
    top: 4px;
    right: 4px;
    font-size: clamp(0.65em, 1.3vw, 0.85em); /* Increased */
    padding: 3px 6px; /* Increased */
}

/* --- Game Title --- */
.game-title {
    margin-bottom: clamp(10px, 1.5vh, 15px);
    background-color: #5a4a3a;
    padding: clamp(5px, 1vh, 8px);
    border: 2px solid #2d241d;
    box-shadow: inset 0 0 8px rgba(0,0,0,0.5);
    flex-shrink: 0;
    display: flex;
    justify-content: center;
    align-items: center;
    min-height: 60px;
}
.game-title h1 {
    font-size: clamp(1.1rem, 3vw + 0.5rem, 1.8em);
    color: #FFFFFF;
    text-shadow:
        3px 3px 0px #1a140d,
        1px 1px 0px #2d241d,
       -1px 1px 0px #2d241d,
        1px -1px 0px #2d241d,
       -1px -1px 0px #2d241d,
        0 0 5px rgba(0, 0, 0, 0.5);
    line-height: 1.1;
    margin: 0;
    padding: 0;
}

/* --- Game Board --- */
.game-board {
    display: flex;
    flex-direction: column;
    flex-grow: 1;
    min-height: 0;
    overflow: hidden; /* Keep */
}
.categories {
    display: grid;
    grid-template-columns: repeat(6, 1fr);
    gap: clamp(3px, 0.5vw, 6px);
    margin-bottom: clamp(5px, 1vh, 10px);
    text-align: center;
    flex-shrink: 0;
    position: relative;
    z-index: 5;
}
.category-header {
    background-color: rgba(40, 30, 20, 0.8);
    padding: 15px 5px;
    font-size: 0.8em;
    border: 2px solid #1a140d;
    min-height: 60px;
    display: flex;
    justify-content: center;
    align-items: center;
    line-height: 1.2;
    word-break: break-word;
    color: #e0e0e0;
    text-shadow: 1px 1px #000;
}
/* --- Questions Grid (Modified for Height and Gap) --- */
.questions-grid {
    display: grid;
    grid-template-columns: repeat(6, 1fr); /* Keeps columns defined */
    /* --- Keep HORIZONTAL gap ONLY --- */
    column-gap: clamp(3px, 0.5vw, 6px); /* Changed from 'gap' to 'column-gap' */
    /* --- REMOVE row-gap if you set it explicitly --- */
    /* row-gap: clamp(3px, 0.5vh, 6px); */ /* Remove this if present */

    flex-grow: 1; /* Allow grid container to grow vertically */
    min-height: 0; /* Allow shrinking */
    /* overflow-y: auto; */ /* <<< LINE REMOVED or COMMENTED OUT >>> */
    padding-bottom: 5px; /* Keep */
    align-items: stretch; /* Default, ensures columns take full height */
}

/* --- Category Column (Modified for Gap & Justification) --- */
.category-column {
    display: flex;
    flex-direction: column;
    /* --- REMOVE the vertical 'gap' property --- */
    /* gap: clamp(3px, 0.5vh, 6px); */ /* REMOVE THIS LINE */

    align-items: center; /* Keep chests centered horizontally */
    min-height: 0; /* Allow columns to shrink if necessary */

    /* --- ADD justify-content to distribute vertical space --- */
    justify-content: space-between; /* Or space-around / space-evenly */
}


/* --- Chests --- */
.chest {
    width: 100%;
    flex-shrink: 0;
    max-width: clamp(50px, 12vw, 130px);
    aspect-ratio: 1 / 1;
    cursor: pointer;
    position: relative;
    display: flex;
    justify-content: center;
    align-items: center;
    background-color: transparent;
    z-index: 1;
    transition: transform 0.2s ease, opacity 0.3s ease, filter 0.3s ease, outline 0.4s ease-in-out;
    filter: drop-shadow(0 0 0 transparent);
}
.chest img {
    display: block;
    width: 100%;
    height: 100%;
    object-fit: contain;
    transition: opacity 0.3s ease;
    position: relative;
    z-index: 1;
    /* image-rendering handled globally */
}
.chest:hover:not(.opened):not(.temp-frog-highlight):not(.seer-peek-available) {
    transform: scale(1.25); /* Adjusted scale */
    filter: drop-shadow(0px 0px 8px rgba(255, 215, 0, 0.85)); /* Contour glow */
    z-index: 10;
}
.chest.opened {
    opacity: 0.5;
    cursor: default;
    pointer-events: none;
    transition: opacity 0.3s ease;
    outline: none !important;
    transform: none !important;
    z-index: 0;
    filter: none !important;
}
.chest.opened .chest-points,
.chest.opened .frog-multiplier-text {
    opacity: 0;
    transition: opacity 0.1s ease;
}
.chest-points {
    display: block;
    position: absolute;
    bottom: 0%;
    left: 0;
    right: 0;
    text-align: center;
    color: #ffcc00;
    font-size: clamp(1.0em, 2.2vw, 1.3em);
    font-weight: bold;
    text-shadow:
       1px 1px 0 #000, -1px 1px 0 #000, 1px -1px 0 #000, -1px -1px 0 #000,
       0px 0px 2px rgba(0,0,0,0.4);
    line-height: 1;
    padding: 1px 0 2px 0;
    z-index: 2;
    pointer-events: none;
    user-select: none;
    transition: opacity 0.3s ease, transform 0.2s ease;
    transform-origin: center bottom;
}
.chest:hover:not(.opened):not(.temp-frog-highlight):not(.seer-peek-available) .chest-points {
    transform: scale(1.12); /* Match hover scale */
}
.chest.opened .chest-points {
    transform: scale(1); /* Reset */
}

/* Feature Highlights on Chests */
.frog-highlight-2x { outline: 4px solid #FFD700; outline-offset: 2px; box-shadow: 0 0 15px 5px #FFD700; z-index: 5; border-radius: 5px; }
.frog-highlight-4x { outline: 5px solid #32CD32; outline-offset: 3px; box-shadow: 0 0 25px 8px #32CD32, 0 0 4px 1px rgba(255, 255, 255, 0.7) inset; z-index: 6; border-radius: 7px; }
.frog-highlight-8x { outline: 6px solid #1E90FF; outline-offset: 4px; box-shadow: 0 0 35px 12px #1E90FF, 0 0 8px 3px rgba(255, 255, 255, 0.8) inset; z-index: 7; border-radius: 9px; animation: frog-pulse-medium 1.5s infinite ease-in-out; }
.frog-highlight-16x { outline: 7px solid #DA70D6; outline-offset: 5px; box-shadow: 0 0 50px 16px #DA70D6, 0 0 12px 5px rgba(255, 255, 255, 0.9) inset; z-index: 8; border-radius: 11px; animation: frog-pulse-strong 1s infinite ease-in-out; }
.temp-frog-highlight { outline: 4px dashed rgba(255, 255, 255, 0.6); outline-offset: 2px; box-shadow: 0 0 10px 3px rgba(255, 255, 255, 0.5); z-index: 5; border-radius: 5px; opacity: 0.85; transition: none; }
.frog-multiplier-text {
    position: absolute; top: -12px; right: -12px; background-color: rgba(0, 0, 0, 0.9);
    font-size: 1em; padding: 4px 8px; border-radius: 50%; font-weight: bold;
    z-index: 10; pointer-events: none; text-shadow: 1px 1px 2px #000;
    min-width: 32px; min-height: 32px; display: inline-flex; justify-content: center;
    align-items: center; line-height: 1; border-width: 2px; border-style: solid;
    color: #FFD700; border-color: #FFD700;
}
.frog-multiplier-text.level-2 { color: #32CD32; border-color: #32CD32; }
.frog-multiplier-text.level-3 { color: #1E90FF; border-color: #1E90FF; }
.frog-multiplier-text.level-4 { color: #DA70D6; border-color: #DA70D6; }

.chest.seer-peek-available { outline: 3px dashed #a898ba; outline-offset: 3px; box-shadow: 0 0 15px 4px #7a5a8a; cursor: pointer; }
.chest.seer-peek-available:hover { transform: scale(1.08); outline-style: solid; }
.chest.seer-peek-available.opened { outline: none !important; box-shadow: none !important; cursor: default; opacity: 0.5; transform: none !important; }

.questions-grid .category-column.forced-category {
    background-color: rgba(120, 0, 120, 0.2); outline: 3px solid #e8a0ff;
    outline-offset: -3px; box-shadow: 0 0 15px 5px rgba(232, 160, 255, 0.5);
    border-radius: 5px; padding: 5px 0;
    transition: background-color 0.3s ease, outline 0.3s ease, box-shadow 0.3s ease;
}
.forced-active .questions-grid .category-column:not(.forced-category) .chest:not(.opened) {
     opacity: 0.75; transition: opacity 0.3s ease;
}
.forced-active .questions-grid .category-column.forced-category .chest {
    opacity: 1 !important; filter: none !important;
}

/* --- Player Cards --- */
.player-card {
    background-color: #4a3a2a; border: 2px solid #2d241d;
    padding: clamp(5px, 1vh, 8px); text-align: center;
    transition: background-color 0.3s ease, box-shadow 0.3s ease;
    box-shadow: 0 0 4px rgba(0,0,0,0.2);
    flex-grow: 1; flex-basis: 120px; min-width: 100px;
    display: flex; flex-direction: column; position: relative;
    min-width: 100px;
    flex-direction: column;
}
.player-card.active-turn {
    background-color: #6a5a4a; box-shadow: 0 0 10px 2px #ffcc00;
}
.player-info-top {
    display: flex; justify-content: flex-start; align-items: center;
    margin-bottom: 3px; padding-right: 28px; /* Space for icon */
}
.player-name {
    font-size: 0.9em; /* Default/Max size */
    color: #c8b084;
    text-shadow: 1px 1px #000;
    /* word-break: break-word; */ /* REMOVE or comment out if you had this */
    text-align: left;
    /* --- ADD these properties --- */
    white-space: nowrap;     /* Prevent text from wrapping */
    overflow: hidden;        /* Hide text that overflows */
    text-overflow: ellipsis; /* Add "..." if text is hidden */
    /* We will override font-size with JS if needed */
    display: block; /* Ensure it takes up block space */
    max-width: 100%; /* Ensure it doesn't try to expand parent */
}

.inventory-button-icon {
    width: clamp(40px, 3vw, 66px); height: clamp(40px, 3vw, 66px);
    cursor: pointer; transition: transform 0.2s ease;
    position: absolute; top: 5px; right: 5px; z-index: 5;
    /* image-rendering handled globally */
}
.inventory-button-icon:hover { transform: scale(1.15); }
.player-score {
    font-size: 1.3em; margin-bottom: 10px; display: block;
    transition: color 0.3s ease; margin-top: 5px;
}
.player-score.score-positive { color: #90ee90; }
.player-score.score-negative { color: #ff6b6b; }
.player-score.score-change { animation: score-flash 0.5s ease-out; }
.score-buttons {
    margin-top: auto;
    padding-top: 8px;
    display: flex;
    justify-content: center;
    align-items: center; /* Keep items vertically aligned */
    flex-wrap: nowrap; /* Keep on one line */
    gap: 2px; /* Minimal gap */
    width: 100%;
    min-width: 0; /* Allow container to shrink */
    overflow: hidden; /* Fallback: hide overflow *at the container level* */
}

.score-buttons button {
    font-family: 'Press Start 2P', cursive;
    background: none;
    border: 1px solid #90ee90;
    color: #90ee90;
    border-radius: 3px;
    padding: 2px clamp(1px, 0.5vw, 3px); /* Minimal horizontal padding */
    /* --- Make font size shrink even more aggressively --- */
    font-size: clamp(0.25em, 1.1vw, 0.65em); /* Lowered minimum significantly */
    transition: background-color 0.2s, color 0.2s;
    flex: 0 1 auto; /* grow=0, shrink=1, basis=auto */
    min-width: 0; /* Allow button to shrink based on content */
    text-align: center;
    white-space: nowrap; /* Keep text on one line */
    /* --- REMOVE overflow and text-overflow from the button --- */
    /* overflow: hidden; */
    /* text-overflow: ellipsis; */
}

.score-buttons button:hover {
    background-color: #90ee90;
    color: #2d241d;
}
.score-buttons .subtract-score {
    border-color: #ff6b6b;
    color: #ff6b6b;
}
.score-buttons .subtract-score:hover {
    background-color: #ff6b6b;
    color: #2d241d;
}
.player-inventory { display: none; /* Hidden small icons */ }




/* === MODAL STYLES === */

/* --- Base Modal Styles --- */
.modal {
    display: none; position: fixed; z-index: 1000;
    left: 0; top: 0; width: 100%; height: 100%;
    overflow: hidden; background-color: rgba(0, 0, 0, 0.8);
    padding: 20px;
}
.modal-content {
    font-family: 'Press Start 2P', cursive; /* Keep for modals override body */
    background-color: #4a3a2a; /* Default background */
    margin: auto; padding: 30px; border: 5px solid #2d241d;
    width: 80%; max-width: 600px; /* Default max-width */
    color: #f0e0c0; position: relative; text-align: center;
    box-shadow: 0 5px 15px rgba(0, 0, 0, 0.5);
    max-height: 90vh; overflow-y: auto;
}
.close-button {
    color: #aaa; position: absolute; top: 10px; right: 20px;
    font-size: 28px; font-weight: bold; cursor: pointer;
    z-index: 1010; line-height: 1;
}
.close-button:hover, .close-button:focus { color: #fff; text-decoration: none; }

/* --- Setup Modal --- */
.setup-content { background-color: #5a4a3a; color: #e0e0e0; }
.setup-content h2 { font-size: clamp(1.1em, 1.8vw + 0.5rem, 1.4em); margin-bottom: 20px; color: #c8b084; text-shadow: 1px 1px #000; }
#player-count-step label, #player-names-step p { font-size: 0.9em; display: block; margin-bottom: 10px; }
#player-count-step input[type="number"],
#player-names-step input[type="text"] {
    font-family: 'Press Start 2P', cursive; /* Keep */
    padding: 8px; margin-bottom: 15px; border: 2px solid #2d241d;
    background-color: #f0e0c0; color: #333;
}
#player-count-step input[type="number"] { width: 80px; text-align: center; }
#player-names-step input[type="text"] { width: 80%; max-width: 250px; display: block; margin: 0 auto 15px auto; text-align: left; }
#player-name-inputs { margin-bottom: 20px; }
.setup-content button {
    /* font-family inherited */ padding: 10px 15px; background-color: #7a6a5a;
    color: #f0e0c0; border: 2px solid #2d241d;
    font-size: 0.9em; transition: background-color 0.2s; margin-top: 10px;
}
.setup-content button:hover { background-color: #9a8a7a; }
.error-message { color: #ff6b6b; font-size: 0.8em; margin-top: 10px; min-height: 1em; display: none; }

/* --- Question Modal --- */
#question-points-display { font-size: 2em; color: #ffcc00; text-shadow: 2px 2px #000; margin-bottom: 25px; line-height: 1.2; font-weight: bold; }
#question-text { font-size: 1.4em; margin-bottom: 20px; min-height: 80px; line-height: 1.5; }
#answer-text { font-size: 1.2em; margin: 15px 0 25px 0; color: #90ee90; line-height: 1.4; }
.question-content button {
    /* font-family inherited */ padding: 10px 20px; background-color: #7a6a5a;
    color: #f0e0c0; border: 2px solid #2d241d;
    font-size: 1em; transition: background-color 0.2s;
    margin: 10px 5px 0 5px; display: inline-block;
}
.question-content button:hover { background-color: #9a8a7a; }

/* --- Card Modal --- */
.card-modal .modal-content {
    background-color: transparent !important; border: none !important;
    box-shadow: none !important; padding: 0 !important;
    max-width: fit-content; width: auto; display: flex;
    justify-content: center; align-items: center;
}
.card-modal h2 { display: none; } /* Hide title */
#card-image-container {
    width: auto; max-width: 90vw; max-height: 85vh;
    margin: 0 auto; display: flex; justify-content: center;
    align-items: center; padding: 0;
}
#card-image-container .card { max-width: 100%; max-height: 100%; }
#card-image {
    display: block; max-width: 100%; max-height: 100%; height: auto;
    border: 3px solid #1a140d; object-fit: contain;
    /* image-rendering handled globally */
}
.card-modal .close-button {
    color: #fff; text-shadow: 0 0 5px rgba(0, 0, 0, 0.8); z-index: 1011;
}

/* --- Seer Peek Modal --- */
.seer-peek-modal .modal-content { max-width: 500px; background-color: #4a315a; border: 5px solid #2d1d3a; color: #e0d0f0; }
.seer-peek-modal h3 { font-size: clamp(1em, 1.5vw + 0.5rem, 1.2em); margin-bottom: 15px; color: #e8d8ff; text-shadow: 1px 1px #1a0a2a; }
.seer-peek-modal p { font-size: 0.9em; margin-bottom: 10px; line-height: 1.3; }
#seer-peek-words { font-size: 1.1em; color: #fff; background-color: rgba(0,0,0,0.3); padding: 15px; margin: 10px 0 20px 0; border: 1px dashed #a898ba; min-height: 50px; display: flex; justify-content: center; align-items: center; text-align: center; line-height: 1.5; word-spacing: 0.5em; flex-wrap: wrap; gap: 0.5em; }
.seer-peek-buttons { margin-top: 20px; display: flex; justify-content: center; gap: 15px; }
.seer-peek-buttons button {
    /* font-family inherited */ padding: 10px 20px; border: 2px solid #2d1d3a;
    font-size: 0.85em; transition: background-color 0.2s, color 0.2s;
}
#seer-accept-btn { background-color: #7a5a8a; color: #f0e0ff; }
#seer-accept-btn:hover { background-color: #9a7aaa; }
#seer-reject-btn { background-color: #5a4a6a; color: #d0c0e0; }
#seer-reject-btn:hover { background-color: #7a6a8a; }

/* --- Sacrificial Goblet Modal --- */
.goblet-input-modal .modal-content { max-width: 450px; background-color: #4d1f1f; border: 5px solid #330d0d; color: #f0d0a0; }
.goblet-input-modal h2 { font-size: clamp(1.1em, 1.8vw + 0.5rem, 1.4em); color: #ff4d4d; margin-bottom: 20px; text-shadow: 1px 1px #1a0a00; }
.goblet-input-modal p { font-size: 0.9em; margin-bottom: 25px; line-height: 1.4; }
#goblet-symbol-img { display: block; margin: 15px auto 20px auto; max-width: 150px; height: auto; /* image-rendering handled globally */ }
.goblet-slider-container { margin: 20px 0 30px 0; display: flex; align-items: center; justify-content: center; gap: 15px; }
#goblet-amount-display { font-weight: bold; font-size: 1.2em; color: #a00000; text-shadow: 1px 1px #330000; min-width: 35px; text-align: right; }
/* Slider Styles (keep detailed track/thumb styles) */
#goblet-amount-slider { -webkit-appearance: none; appearance: none; width: 60%; height: 12px; background: transparent; cursor: pointer; outline: none; }
#goblet-amount-slider::-webkit-slider-runnable-track { width: 100%; height: 12px; cursor: pointer; background-color: #6b0000; border: 2px solid #330000; border-radius: 0; box-shadow: inset 0 0 3px rgba(0,0,0,0.6); }
#goblet-amount-slider::-moz-range-track { width: 100%; height: 12px; cursor: pointer; background-color: #6b0000; border: 2px solid #330000; border-radius: 0; box-shadow: inset 0 0 3px rgba(0,0,0,0.6); }
#goblet-amount-slider::-webkit-slider-thumb { -webkit-appearance: none; appearance: none; border: 2px solid #330000; height: 20px; width: 14px; background: #ff4d4d; border-radius: 0; cursor: pointer; margin-top: -6px; box-shadow: 1px 1px 2px rgba(0,0,0,0.4); }
#goblet-amount-slider:hover::-webkit-slider-thumb { background: #ff6666; }
#goblet-amount-slider:active::-webkit-slider-thumb { background: #cc0000; }
#goblet-amount-slider::-moz-range-thumb { border: 2px solid #330000; height: 20px; width: 14px; background: #ff4d4d; border-radius: 0; cursor: pointer; box-shadow: 1px 1px 2px rgba(0,0,0,0.4); }
#goblet-amount-slider:hover::-moz-range-thumb { background: #ff6666; }
#goblet-amount-slider:active::-moz-range-thumb { background: #cc0000; }
#goblet-accept-btn {
    /* font-family inherited */ padding: 10px 20px; background-color: #8b0000;
    color: #ffdddd; border: 2px solid #330000;
    font-size: 0.9em; transition: background-color 0.2s; margin-top: 10px;
}
#goblet-accept-btn:hover { background-color: #a52a2a; }

/* --- Player/Category Select Modals --- */
.player-select-modal .modal-content,
.category-select-modal .modal-content { max-width: 450px; } /* Base width */

.player-select-modal .modal-content { background-color: #6a4a3a; }
.category-select-modal .modal-content { max-width: 550px; background-color: #4a2a6a; border-color: #3a1d5a; color: #e8d0ff; }
.category-select-modal h2 { color: #e8a0ff; text-shadow: 1px 1px #3a1d5a; }
#category-select-error { color: #ff8080; }

#player-select-list, #category-select-list {
    margin: 20px 0 15px 0;
    display: flex; /* Default */
    gap: 10px;
    align-items: center;
}
#player-select-list { flex-direction: column; } /* Player list vertical */
#category-select-list {
    display: grid; /* Category list uses grid */
    grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
    justify-items: center;
}

#player-select-list button, #category-select-list button {
    /* font-family inherited */
    border: 2px solid #2d241d;
    transition: background-color 0.2s, color 0.2s;
    width: 80%; /* Default width */
}
#player-select-list button {
    padding: 10px 20px; background-color: #4a3a2a; color: #c8b084;
    font-size: 0.9em; max-width: 250px;
}
#player-select-list button:hover { background-color: #2d241d; color: #f0e0c0; }
#category-select-list button {
    padding: 12px 10px; background-color: #5a3a7a; color: #e8d0ff;
    border-color: #3a1d5a; font-size: 0.8em; width: 100%;
    min-height: 50px; display: flex; align-items: center;
    justify-content: center; text-align: center; line-height: 1.2;
}
#category-select-list button:hover { background-color: #7a5a9a; color: #fff; }

/* --- Inventory Modal --- */
.inventory-modal .modal-content { max-width: 80vw; background-color: #3f3121; border: 5px solid #1a140d; color: #c8b084; } /* Wider */
.inventory-modal h3 { font-size: clamp(1.1em, 1.8vw + 0.5rem, 1.4em); margin-bottom: 25px; text-shadow: 1px 1px #000; }
.inventory-modal-cards-container {
    display: grid; grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
    gap: 10px; padding: 10px; max-height: 70vh; overflow-y: auto;
    background-color: rgba(0, 0, 0, 0.2); border: 1px solid #5a4a3a;
    min-height: 300px; justify-items: center; align-content: flex-start;
}
.inventory-modal-cards-container:empty { /* Style empty state */
    display: flex; grid-template-columns: none; justify-content: center;
    align-items: center; text-align: center; font-style: italic; color: #a898ba;
}
.inventory-modal-card-item { text-align: center; position: relative; cursor: default; }
.inventory-modal-card-image { /* Image within inventory card */
    max-width: 100%; height: auto; max-height: 200px; display: block; margin: 0 auto;
    border: 2px solid #5a4a3a; background-color: rgba(0, 0, 0, 0.3);
    transition: border-color 0.2s ease, transform 0.2s ease;
    /* image-rendering handled globally */
}
.inventory-modal-card-item.active-card { cursor: pointer; }
.inventory-modal-card-item.active-card .inventory-modal-card-image:hover {
    border-color: #ffd700; transform: scale(1.05);
}
/* Remove Button / Count Indicator (keep specific styles) */
.remove-card-button, .inventory-modal-cards-container .inventory-card-count {
    position: absolute; z-index: 6; width: 24px; height: 24px; padding: 0;
    border: 2px solid #111; font-family: 'Press Start 2P', cursive;
    font-weight: bold; text-align: center;
    box-shadow: 1px 1px 2px rgba(0,0,0,0.5); border-radius: 3px;
}
.remove-card-button {
    top: 2px; right: 2px; background-color: rgba(255, 0, 0, 0.8);
    color: #fff; font-size: 14px; line-height: 20px; cursor: pointer;
    transition: background-color 0.2s, transform 0.1s;
}
.remove-card-button:hover { background-color: rgba(255, 0, 0, 1); transform: scale(1.1); }
.remove-card-button:active { transform: scale(0.95); }
.inventory-modal-cards-container .inventory-card-count {
    top: 2px; left: 2px; z-index: 7; background-color: rgba(0, 100, 255, 0.85);
    color: #fff; font-size: 12px; line-height: 20px; cursor: default;
    display: inline-flex; justify-content: center; align-items: center;
    pointer-events: none;
}

/* --- Roulette Modal --- */
.roulette-modal .modal-content { max-width: 500px; background-color: #2a5a4a; border: 5px solid #1d3a2d; color: #d0f0e0; }
.roulette-modal h2 { font-size: clamp(1.1em, 1.8vw + 0.5rem, 1.4em); color: #a0e0c0; margin-bottom: 15px; text-shadow: 1px 1px #1a3a2a; }
.roulette-modal p { font-size: 0.9em; margin-bottom: 20px; line-height: 1.4; }
#roulette-wheel-img { display: block; margin: 10px auto 20px auto; max-width: 100px; height: auto; /* image-rendering handled globally */ }
.roulette-slider-container { margin: 20px 0 25px 0; display: flex; align-items: center; justify-content: center; gap: 15px; }
#roulette-amount-display { font-weight: bold; font-size: 1.2em; color: #fff; text-shadow: 1px 1px #1d3a2d; min-width: 35px; text-align: right; }
/* Slider styles (keep detailed track/thumb styles) */
#roulette-amount-slider { -webkit-appearance: none; appearance: none; width: 60%; height: 12px; background: transparent; cursor: pointer; outline: none; }
#roulette-amount-slider::-webkit-slider-runnable-track { width: 100%; height: 12px; cursor: pointer; background-color: #1d3a2d; border: 2px solid #0d1a0d; border-radius: 0; box-shadow: inset 0 0 3px rgba(0,0,0,0.6); }
#roulette-amount-slider::-moz-range-track { width: 100%; height: 12px; cursor: pointer; background-color: #1d3a2d; border: 2px solid #0d1a0d; border-radius: 0; box-shadow: inset 0 0 3px rgba(0,0,0,0.6); }
#roulette-amount-slider::-webkit-slider-thumb { -webkit-appearance: none; appearance: none; border: 2px solid #0d1a0d; height: 20px; width: 14px; background: #a0e0c0; border-radius: 0; cursor: pointer; margin-top: -6px; box-shadow: 1px 1px 2px rgba(0,0,0,0.4); }
#roulette-amount-slider:hover::-webkit-slider-thumb { background: #c0f0d0; }
#roulette-amount-slider:active::-webkit-slider-thumb { background: #70a080; }
#roulette-amount-slider::-moz-range-thumb { border: 2px solid #0d1a0d; height: 20px; width: 14px; background: #a0e0c0; border-radius: 0; cursor: pointer; box-shadow: 1px 1px 2px rgba(0,0,0,0.4); }
#roulette-amount-slider:hover::-moz-range-thumb { background: #c0f0d0; }
#roulette-amount-slider:active::-moz-range-thumb { background: #70a080; }
#roulette-gamble-btn {
    /* font-family inherited */ padding: 12px 25px; background-color: #4a7a6a;
    color: #fff; border: 2px solid #1d3a2d;
    font-size: 1em; transition: background-color 0.2s; margin-top: 10px;
}
#roulette-gamble-btn:hover { background-color: #6a9a8a; }
#roulette-error { margin-top: 15px; /* Uses .error-message style */ }

/* --- Treasure Map Modal --- */
.treasure-map-modal .modal-content { max-width: 650px; background-color: #B8860B; border: 5px solid #8B4513; color: #F5DEB3; text-shadow: 1px 1px #5a3a1a; }
.treasure-map-modal h2 { font-size: clamp(1.2em, 2vw + 0.5rem, 1.6em); color: #FFD700; margin-bottom: 15px; text-shadow: 2px 2px #8B4513; }
.treasure-map-modal p { font-size: 0.9em; margin-bottom: 25px; line-height: 1.4; color: #F5DEB3; }
.treasure-card-slots { display: flex; justify-content: space-around; align-items: stretch; margin-bottom: 30px; padding: 15px; background-color: rgba(139, 69, 19, 0.3); border: 2px dashed #DAA520; }
.treasure-slot { text-align: center; width: 30%; max-width: 150px; padding: 10px; border: 3px solid #DAA520; background-color: #F5DEB3; min-height: 200px; display: flex; flex-direction: column; justify-content: flex-start; box-shadow: inset 0 0 8px rgba(0,0,0,0.3); }
.slot-label { font-size: 0.8em; color: #8B4513; margin-bottom: 10px; font-weight: bold; display: block; flex-shrink: 0; }
.treasure-slot img { display: block; max-width: 100%; height: 140px; margin: auto 0 0 0; border: 1px solid #b8860b; object-fit: contain; background-color: #e0c8a0; transition: opacity 0.3s ease; /* image-rendering handled globally */ }
.treasure-slot img.slot-empty { opacity: 0; border: 1px dashed #a08060; background-color: rgba(0,0,0,0.05); height: 140px; }
#open-treasure-btn {
    /* font-family inherited */ padding: 12px 25px; background-color: #DAA520;
    color: #4a3000; border: 3px solid #8B4513;
    font-size: 1.1em; transition: background-color 0.2s, opacity 0.2s;
    margin: 10px auto 0 auto; display: block; box-shadow: 2px 2px 4px rgba(0,0,0,0.4);
}
#open-treasure-btn:hover:not(:disabled) { background-color: #FFD700; }
#open-treasure-btn:disabled { background-color: #a08d70; border-color: #706050; color: #706050; cursor: not-allowed; opacity: 0.7; box-shadow: none; }
.treasure-status-message { margin-top: 15px; font-size: 0.8em; color: #F5DEB3; text-shadow: 1px 1px #5a3a1a; min-height: 1.2em; text-align: center; }

/* --- Info Modal --- */
.info-modal .modal-content { max-width: 500px; background-color: #5a4a3a; color: #e0e0e0; }
.info-modal h3 { font-size: clamp(1em, 1.5vw + 0.5rem, 1.2em); margin-bottom: 15px; color: #c8b084; text-shadow: 1px 1px #000; }
.info-modal p { font-size: 0.9em; margin-bottom: 25px; line-height: 1.4; } /* Base style for text */
.info-modal button {
    /* font-family inherited */ padding: 10px 25px; background-color: #7a6a5a;
    color: #f0e0c0; border: 2px solid #2d241d;
    font-size: 0.9em; transition: background-color 0.2s;
}
.info-modal button:hover { background-color: #9a8a7a; }
/* Styles for embedded card */
.info-modal-eaten-card { display: flex; justify-content: center; align-items: center; margin: 10px 0; padding: 5px; }
.info-modal-eaten-card .card { transform: scale(0.85); transform-origin: center center; margin: -30px auto -45px auto; pointer-events: none; max-width: 90%; max-height: 85%; }
.info-modal-eaten-card .card.shiny::before { /* Keep shiny styles if used */ }

/* --- Confirmation Modal --- */
.confirm-modal .modal-content { max-width: 450px; background-color: #5a4a3a; border: 5px solid #2d241d; color: #e0e0e0; }
.confirm-modal h3 { font-size: clamp(1.1em, 1.8vw + 0.5rem, 1.4em); color: #c8b084; margin-bottom: 15px; text-shadow: 1px 1px #000; }
.confirm-modal p { font-size: 0.9em; margin-bottom: 25px; line-height: 1.4; white-space: pre-wrap; }
.confirm-modal-buttons { display: flex; justify-content: center; gap: 20px; margin-top: 10px; }
.confirm-modal-buttons button {
    /* font-family inherited */ padding: 10px 25px; border: 2px solid #2d241d;
    font-size: 1em; transition: background-color 0.2s, color 0.2s, transform 0.1s;
    min-width: 100px;
}
#confirm-modal-yes-btn { background-color: #d9534f; border-color: #ac2925; color: #fff; }
#confirm-modal-yes-btn:hover { background-color: #c9302c; transform: scale(1.05); }
#confirm-modal-no-btn { background-color: #777; border-color: #555; color: #fff; }
#confirm-modal-no-btn:hover { background-color: #666; transform: scale(1.05); }


/* === VISIBILITY CONTROL === */
body.setup-active .game-environment, body.game-active .setup-modal { display: none; }
body.setup-active .setup-modal, body.game-active .game-environment { display: flex; }
body.game-active .modal { display: none; }
body.game-active .modal[style*="display: flex"] { display: flex !important; justify-content: center; align-items: center; }


/* === CARD STYLES === */

/* --- Base Card Structure --- */
.card {
    width: 280px; background-color: #a0a0a0; border: 4px solid #404040;
    box-shadow: 3px 3px 0px 0px #404040, inset 0 0 0 2px #c0c0c0;
    padding: 5px; display: flex; flex-direction: column;
    transition: transform 0.2s ease-out; position: relative; z-index: 1;
    /* image-rendering handled globally */
}
.card:hover { transform: scale(1.05); z-index: 10; }

/* Card Content Areas */
.card-image-area {
    width: 100%; aspect-ratio: 1 / 1; background-color: #2d241d;
    border: 3px solid #777; margin-bottom: 8px; overflow: hidden;
    display: flex; justify-content: center; align-items: center;
    box-shadow: inset 0 0 5px rgba(0,0,0,0.5);
}
.card-image-area img {
    display: block; width: 100%; height: 100%; object-fit: cover;
    /* image-rendering handled globally */
}
.card-content {
    background-color: #888; border: 2px solid #404040; padding: 10px;
    flex-grow: 1; display: flex; flex-direction: column; min-height: 150px;
}
.card-title {
    font-size: 1rem; color: #fff; text-shadow: 1px 1px #333;
    text-align: center; margin-bottom: 10px; line-height: 1.2;
    padding-bottom: 5px; border-bottom: 2px solid #404040;
    word-break: break-word;
}
.card-description {
    font-size: 0.7rem; color: #333; line-height: 1.5;
    margin-bottom: 15px; flex-grow: 1; min-height: 40px;
    text-align: center; /* Moved from theme overrides */
}
.card-type-banner {
    background-color: #555; border: 2px solid #222; padding: 4px 8px;
    margin-top: auto; text-align: center;
    box-shadow: inset 0 0 4px rgba(0,0,0,0.4);
}
.card-type {
    font-size: 0.75rem; color: #fff; text-shadow: 1px 1px #111;
    font-weight: bold;
}

/* Card Theme Overrides */
/* Negative */
.card.negative { background-color: #6e2f2f; border-color: #3b1414; box-shadow: 3px 3px 0px 0px #3b1414, inset 0 0 0 2px #8e4f4f; }
.card.negative .card-image-area { border-color: #8e4f4f; }
.card.negative .card-content { background-color: #5e1f1f; border-color: #3b1414; }
.card.negative .card-title { color: #ff6b6b; text-shadow: 1px 1px #3b1414; border-bottom-color: #3b1414; }
.card.negative .card-description { color: #f0d0d0; }
.card.negative .card-type-banner { background-color: #4d0f0f; border-color: #2b0404; }
.card.negative .card-type { color: #ffcccc; text-shadow: 1px 1px #2b0404; }
/* Common - Uses defaults */
/* Rare */
.card.rare { background-color: #3a5a7a; border-color: #1d3a5a; box-shadow: 3px 3px 0px 0px #1d3a5a, inset 0 0 0 2px #5a7a9a; }
.card.rare .card-image-area { border-color: #5a7a9a; }
.card.rare .card-content { background-color: #2a4a6a; border-color: #1d3a5a; }
.card.rare .card-title { color: #a0d8ff; text-shadow: 1px 1px #1d3a5a; border-bottom-color: #1d3a5a; }
.card.rare .card-description { color: #d0e8ff; }
.card.rare .card-type-banner { background-color: #1a2d4a; border-color: #0d1d3a; }
.card.rare .card-type { color: #c0e0ff; text-shadow: 1px 1px #0d1d3a; }
/* Epic */
.card.epic { background-color: #5a3a7a; border-color: #3a1d5a; box-shadow: 3px 3px 0px 0px #3a1d5a, inset 0 0 0 2px #7a5a9a; }
.card.epic .card-image-area { border-color: #7a5a9a; }
.card.epic .card-content { background-color: #4a2a6a; border-color: #3a1d5a; }
.card.epic .card-title { color: #e8a0ff; text-shadow: 1px 1px #3a1d5a; border-bottom-color: #3a1d5a; }
.card.epic .card-description { color: #e8d0ff; }
.card.epic .card-type-banner { background-color: #2d1a4a; border-color: #1d0a3a; }
.card.epic .card-type { color: #d8c0ff; text-shadow: 1px 1px #1d0a3a; }
/* Legendary */
.card.legendary { background-color: #b8860b; border-color: #5a3a00; box-shadow: 3px 3px 0px 0px #5a3a00, inset 0 0 0 2px #daa520; }
.card.legendary .card-image-area { border-color: #daa520; }
.card.legendary .card-content { background-color: #8b4513; border-color: #5a3a00; }
.card.legendary .card-title { color: #ffd700; text-shadow: 1px 1px #5a3a00; border-bottom-color: #5a3a00; }
.card.legendary .card-description { color: #f5f5dc; }
.card.legendary .card-type-banner { background-color: #6a2a00; border-color: #401a00; }
.card.legendary .card-type { color: #ffec8b; text-shadow: 1px 1px #401a00; }
/* Dark */
.card.dark { background-color: #222; border-color: #0a0a0a; box-shadow: 3px 3px 0px 0px #0a0a0a, inset 0 0 0 2px #444; }
.card.dark .card-image-area { border-color: #444; }
.card.dark .card-content { background-color: #333; border-color: #0a0a0a; }
.card.dark .card-title { color: #ff4444; text-shadow: 1px 1px #000; border-bottom-color: #0a0a0a; }
.card.dark .card-description { color: #aaa; }
.card.dark .card-type-banner { background-color: #1a1a1a; border-color: #000; }
.card.dark .card-type { color: #ff5555; text-shadow: 1px 1px #000; }
/* Event */
.card.event { background-color: #3a7a5a; border-color: #1d5a3a; box-shadow: 3px 3px 0px 0px #1d5a3a, inset 0 0 0 2px #5a9a7a; }
.card.event .card-image-area { border-color: #5a9a7a; }
.card.event .card-content { background-color: #2a6a4a; border-color: #1d5a3a; }
.card.event .card-title { color: #a0ffd8; text-shadow: 1px 1px #1d5a3a; border-bottom-color: #1d5a3a; }
.card.event .card-description { color: #d0fff0; }
.card.event .card-type-banner { background-color: #1a4a2d; border-color: #0d3a1d; }
.card.event .card-type { color: #c0ffe0; text-shadow: 1px 1px #0d3a1d; }

/* Shiny Card Effect */
@keyframes shiny-sweep { 0% { background-position: -200% 0; } 100% { background-position: 200% 0; } }
.shiny { position: relative; overflow: hidden; z-index: 1; }
.shiny::before {
    content: ''; position: absolute; top: 0; left: 0; right: 0; bottom: 0; z-index: 3;
    background: linear-gradient( 110deg, rgba(255,255,255,0) 20%, rgba(255,0,0,0.3) 30%,
        rgba(255,165,0,0.3) 35%, rgba(255,255,0,0.3) 40%, rgba(0,128,0,0.3) 45%,
        rgba(0,0,255,0.3) 50%, rgba(75,0,130,0.3) 55%, rgba(238,130,238,0.3) 60%,
        rgba(255,255,255,0) 70% );
    background-size: 250% 100%; mix-blend-mode: color-dodge; opacity: 0.6;
    animation: shiny-sweep 4s linear infinite; pointer-events: none; border-radius: inherit;
}
.card .card-content, .card .card-image-area { position: relative; z-index: 2; }
.card .remove-card-button, .card .inventory-card-count { z-index: 6; }


/* === ANIMATIONS === */
@keyframes frog-pulse-medium { 0%, 100% { transform: scale(1); opacity: 1; } 50% { transform: scale(1.04); opacity: 0.8; } }
@keyframes frog-pulse-strong { 0%, 100% { transform: scale(1); opacity: 1; } 50% { transform: scale(1.06); opacity: 0.75; } }
@keyframes frog-final-selection-pulse { 0% { transform: scale(1); } 50% { transform: scale(1.12); } 100% { transform: scale(1); } }
.frog-final-choice-animation { animation: frog-final-selection-pulse 0.6s ease-in-out; }
@keyframes score-flash { 0%, 100% { transform: scale(1); opacity: 1; } 50% { transform: scale(1.2); opacity: 0.7; } }


/* === RESPONSIVE ADJUSTMENTS === */
/* Keep all existing @media queries as they were */
/* --- Make sure to test these breakpoints after cleanup --- */

@media (max-width: 1100px) {
    /* Layout Stacking */
    .game-environment { flex-direction: column; gap: clamp(10px, 2vh, 15px); padding: clamp(5px, 1vh, 10px) clamp(5px, 1vw, 10px); }
    .main-game-area { height: auto; width: 95%; max-width: 1000px; order: 2; flex-grow: 1; margin: 0 auto; }
    .side-icon { margin: 5px auto; order: 1; max-height: none; overflow-y: visible; width: 95%; max-width: 500px; flex-direction: row; justify-content: center; gap: clamp(15px, 3vw, 30px) !important; padding: 5px 0 !important; overflow: visible; /* Ensure still visible */ }
    .icon-group { width: auto !important; gap: 3px; padding: 5px; /* Add slight padding for stacked icons */ }
    .icon-group img { max-width: clamp(45px, 7vw, 60px) !important; margin-bottom: 2px !important; }
    .icon-group span:not(.icon-price-tag) { font-size: 0.65em !important; }
    .icon-price-tag { font-size: clamp(0.6em, 1vw, 0.7em) !important; /* Adjusted slightly larger for smaller icons */ padding: 2px 4px !important; top: 1px !important; right: 1px !important; }
}

@media (max-width: 900px) {
    /* Game Board Grid */
    .categories, .questions-grid { grid-template-columns: repeat(3, 1fr); gap: clamp(4px, 1vw, 8px); }
    .category-header { font-size: clamp(0.6em, 1.1vw, 0.75em); min-height: clamp(35px, 5vh, 50px); }
    /* Player Area */
    .player-card { flex-basis: 130px; min-width: 115px; }
    #player-info-area { justify-content: space-around; }
    /* Side Icons (when NOT stacked) */
    .game-environment:not([style*="flex-direction: column"]) .side-icon { width: clamp(55px, 8vw, 140px) !important; gap: clamp(12px, 2vh, 20px) !important; }
    .game-environment:not([style*="flex-direction: column"]) .icon-group img { max-width: clamp(50px, 7vw, 110px) !important; }
    .game-environment:not([style*="flex-direction: column"]) .icon-group span:not(.icon-price-tag) { font-size: clamp(0.55em, 0.9vw, 0.75em) !important; }
    .game-environment:not([style*="flex-direction: column"]) .icon-price-tag { font-size: clamp(0.6em, 1vw, 0.7em) !important; } /* Adjusted */
}

@media (max-width: 768px) {
    /* Layout */
    .game-environment { gap: clamp(8px, 1.2vh, 12px); padding: 5px; }
    .main-game-area { width: 100%; max-width: none; }
    /* Titles/Headers */
    .game-title h1 { font-size: clamp(1rem, 3.5vw + 0.4rem, 1.5em); }
    .game-title { margin-bottom: clamp(8px, 1.2vh, 12px); padding: clamp(4px, 0.8vh, 6px); }
    .category-header { font-size: clamp(0.5em, 0.9vw, 0.65em); min-height: clamp(25px, 3.5vh, 40px); padding: clamp(4px, 0.8vh, 8px) 2px; }
    .questions-grid { gap: clamp(3px, 0.6vw, 6px); }
    .category-column { gap: clamp(3px, 0.6vh, 6px); }
    /* Question Modal */
    #question-text { font-size: 1em; }
    #answer-text { font-size: 0.9em; }
    /* Player Area */
    #player-info-area { gap: clamp(4px, 0.8vw, 8px); padding: clamp(4px, 0.8vh, 6px); margin-top: clamp(8px, 1.2vh, 12px); }
    .player-card { min-width: 100px; flex-basis: 105px; padding: clamp(4px, 0.8vh, 6px); }
    .player-name { font-size: 0.8em; }
    .player-score { font-size: 1.1em; }
    /* Inventory Modal */
    .inventory-modal-cards-container { grid-template-columns: repeat(auto-fill, minmax(160px, 1fr)); gap: 12px; }
    .inventory-modal-cards-container .card { width: 160px; }
    /* Side Icons (STACKED) */
    .game-environment[style*="flex-direction: column"] .side-icon { gap: clamp(10px, 2vw, 20px) !important; width: 90%; max-width: 400px; }
    .game-environment[style*="flex-direction: column"] .icon-group img { max-width: clamp(40px, 6vw, 55px) !important; }
    .game-environment[style*="flex-direction: column"] .icon-group span:not(.icon-price-tag) { font-size: 0.6em !important; }
    .game-environment[style*="flex-direction: column"] .icon-price-tag { font-size: clamp(0.6em, 1vw, 0.7em) !important; display: inline-block !important; top: 0px !important; right: 0px !important; }
}

@media (max-width: 600px) {
     /* Game Board */
    .categories, .questions-grid { grid-template-columns: repeat(2, 1fr); gap: clamp(3px, 0.8vw, 5px); }
    .chest { max-width: clamp(60px, 18vw, 110px); }
    .chest-points { font-size: clamp(0.5em, 1.5vw, 0.75em); }
    /* Player Area Stacked */
    #player-info-area { flex-direction: column; align-items: center; }
    #player-cards-container { justify-content: center; width: 100%; flex-direction: row; gap: 8px; }
    .player-card { flex-basis: 140px; min-width: 110px; flex-grow: 0; width: 45%; }
    /* Inventory Modal */
    .inventory-modal-cards-container { grid-template-columns: repeat(auto-fill, minmax(140px, 1fr)); gap: 10px; }
    .inventory-modal-cards-container .card { width: 140px; }
    /* Side Icons (STACKED) */
    .game-environment[style*="flex-direction: column"] .side-icon { gap: clamp(10px, 2.5vw, 20px) !important; }
    .game-environment[style*="flex-direction: column"] .icon-group img { max-width: clamp(38px, 5.5vw, 50px) !important; }
    .game-environment[style*="flex-direction: column"] .icon-group span:not(.icon-price-tag) { font-size: 0.55em !important; }
    .game-environment[style*="flex-direction: column"] .icon-price-tag { display: none !important; }
    .score-buttons {
        gap: 2px; /* Even smaller gap */
    }
    .score-buttons button {
        padding: 2px clamp(1px, 0.8vw, 3px); /* Smaller padding */
        font-size: clamp(0.35em, 1vw, 0.6em); /* Smaller font */
        border-width: 1px; /* Thinner border to save space */
        min-width: fit-content; /* Ensure minimum is just text */
    }
}

@media (max-width: 480px) {
    /* Title/Header */
    .game-title h1 { font-size: clamp(0.9rem, 4vw + 0.3rem, 1.3em); }
    .category-header { font-size: clamp(0.45em, 0.8vw, 0.6em); min-height: clamp(20px, 3vh, 35px); line-height: 1; }
    /* Modal */
    .modal-content { width: 95%; padding: 15px; } /* Slightly increased base padding */
    .close-button { font-size: 20px; top: 3px; right: 6px; }
    /* Player Area Stacked */
    #player-cards-container { flex-direction: column; align-items: center; gap: 6px; width: 100%; }
    .player-card { width: 85%; max-width: 280px; min-width: unset; flex-basis: auto; flex-grow: 0; padding: 5px; }
    .score-buttons button { font-size: 0.8em; padding: 1px 5px; }
    .inventory-button-icon { width: clamp(30px, 6vw, 40px); height: clamp(30px, 6vw, 40px); top: 2px; right: 2px;} /* Slightly larger icon */
    /* Inventory Modal */
    .inventory-modal-cards-container { grid-template-columns: repeat(auto-fill, minmax(130px, 1fr)); gap: 8px; }
    .inventory-modal-cards-container .card { width: 130px; }
    .inventory-modal-cards-container .card .card-title { font-size: 0.7rem; }
    .inventory-modal-cards-container .card .card-description { font-size: 0.5rem; line-height: 1.2; }
    .inventory-modal-cards-container .card .card-type { font-size: 0.6rem; }
    /* Side Icons (STACKED) */
    .game-environment[style*="flex-direction: column"] .side-icon { gap: clamp(8px, 2vw, 15px) !important; padding: 3px 0 !important; }
    .game-environment[style*="flex-direction: column"] .icon-group img { max-width: clamp(35px, 5vw, 45px) !important; }
    .game-environment[style*="flex-direction: column"] .icon-group span:not(.icon-price-tag) { display: none !important; }
    .game-environment[style*="flex-direction: column"] .icon-price-tag { display: none !important; }
    .score-buttons button {
        padding: 2px 2px;
        font-size: clamp(0.3em, 0.9vw, 0.5em);
    }
}

@media (max-width: 400px) { /* Example for very small */
    .score-buttons button {
        /* Even smaller minimum font if needed */
        font-size: clamp(0.2em, 1vw, 0.55em);
        padding: 1px 1px; /* Almost no padding */
        gap: 1px;
    }
    /* If it STILL overflows visually unacceptably, */
    /* uncommenting flex-wrap here might be the only CSS option left */
    /* .score-buttons { flex-wrap: wrap; justify-content: space-around;} */
}

